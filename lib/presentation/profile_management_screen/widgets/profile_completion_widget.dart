import 'package:flutter/material.dart';import 'package:sizer/sizer.dart';import '../../../core/app_export.dart';class ProfileCompletionWidget extends StatelessWidget {  final double completionPercentage;  final List<String> missingFields;  final VoidCallback onViewAsClient;  const ProfileCompletionWidget({    super.key,    required this.completionPercentage,    required this.missingFields,    required this.onViewAsClient,  });  Color _getCompletionColor(BuildContext context, double percentage) {    if (percentage >= 90) return Theme.of(context).colorScheme.tertiary;    if (percentage >= 70) return Theme.of(context).colorScheme.primary;    if (percentage >= 50) return AppTheme.getWarningColor(context);    return Theme.of(context).colorScheme.error;  }  String _getCompletionMessage(double percentage) {    if (percentage >= 90) return 'Excellent! Your profile is almost complete';    if (percentage >= 70) return 'Good progress! A few more details needed';    if (percentage >= 50) return 'Getting there! Complete more sections';    return 'Let\'s complete your profile to attract clients';  }  @override  Widget build(BuildContext context) {    final completionColor = _getCompletionColor(context, completionPercentage);    return Container(      width: double.infinity,      padding: EdgeInsets.all(4.w),      decoration: BoxDecoration(        gradient: LinearGradient(          colors: [            completionColor.withValues(alpha: 0.1),            completionColor.withValues(alpha: 0.05),          ],          begin: Alignment.topLeft,          end: Alignment.bottomRight,        ),        borderRadius: BorderRadius.circular(16),        border: Border.all(          color: completionColor.withValues(alpha: 0.3),        ),      ),      child: Column(        crossAxisAlignment: CrossAxisAlignment.start,        children: [          Row(            children: [              Container(                padding: EdgeInsets.all(2.w),                decoration: BoxDecoration(                  color: completionColor,                  borderRadius: BorderRadius.circular(8),                ),                child: CustomIconWidget(                  iconName: 'trending_up',                  size: 5.w,                  color: Theme.of(context).colorScheme.surface,                ),              ),              SizedBox(width: 3.w),              Expanded(                child: Column(                  crossAxisAlignment: CrossAxisAlignment.start,                  children: [                    Text(                      'Profile Completion',                      style: Theme.of(context).textTheme.titleSmall?.copyWith(                        fontWeight: FontWeight.w600,                      ),                    ),                    Text(                      _getCompletionMessage(completionPercentage),                      style: Theme.of(context).textTheme.labelSmall?.copyWith(                        color:                        Theme.of(context).colorScheme.onSurfaceVariant,                      ),                    ),                  ],                ),              ),              Text(                '${completionPercentage.toInt()}%',                style: Theme.of(context).textTheme.headlineSmall?.copyWith(                  fontWeight: FontWeight.w700,                  color: completionColor,                ),              ),            ],          ),          SizedBox(height: 2.h),          // Progress Bar          Container(            width: double.infinity,            height: 1.h,            decoration: BoxDecoration(              color:              Theme.of(context).colorScheme.outline.withValues(alpha: 0.2),              borderRadius: BorderRadius.circular(8),            ),            child: FractionallySizedBox(              alignment: Alignment.centerLeft,              widthFactor: completionPercentage / 100,              child: Container(                decoration: BoxDecoration(                  color: completionColor,                  borderRadius: BorderRadius.circular(8),                ),              ),            ),          ),          if (missingFields.isNotEmpty) ...[            SizedBox(height: 2.h),            Text(              'Complete these sections to improve your profile:',              style: Theme.of(context).textTheme.labelMedium?.copyWith(                fontWeight: FontWeight.w500,              ),            ),            SizedBox(height: 1.h),            Wrap(              spacing: 2.w,              runSpacing: 1.h,              children: missingFields.map((field) {                return Container(                  padding:                  EdgeInsets.symmetric(horizontal: 3.w, vertical: 0.5.h),                  decoration: BoxDecoration(                    color: Theme.of(context).colorScheme.surface,                    borderRadius: BorderRadius.circular(16),                    border: Border.all(                      color: Theme.of(context)                          .colorScheme                          .outline                          .withValues(alpha: 0.5),                    ),                  ),                  child: Row(                    mainAxisSize: MainAxisSize.min,                    children: [                      CustomIconWidget(                        iconName: 'radio_button_unchecked',                        size: 3.w,                        color: Theme.of(context).colorScheme.error,                      ),                      SizedBox(width: 1.w),                      Text(                        field,                        style: Theme.of(context).textTheme.labelSmall?.copyWith(                          color: Theme.of(context).colorScheme.onSurface,                        ),                      ),                    ],                  ),                );              }).toList(),            ),          ],          SizedBox(height: 2.h),          // Action Buttons          Row(            children: [              Expanded(                child: OutlinedButton.icon(                  onPressed: onViewAsClient,                  icon: CustomIconWidget(                    iconName: 'visibility',                    size: 4.w,                    color: Theme.of(context).colorScheme.primary,                  ),                  label: Text(                    'View as Client',                    style: Theme.of(context).textTheme.labelMedium?.copyWith(                      fontWeight: FontWeight.w500,                    ),                  ),                  style: OutlinedButton.styleFrom(                    padding: EdgeInsets.symmetric(vertical: 1.5.h),                    shape: RoundedRectangleBorder(                      borderRadius: BorderRadius.circular(8),                    ),                  ),                ),              ),              SizedBox(width: 3.w),              Container(                padding: EdgeInsets.symmetric(horizontal: 4.w, vertical: 1.5.h),                decoration: BoxDecoration(                  color: completionPercentage >= 80                      ? Theme.of(context)                      .colorScheme                      .tertiary                      .withValues(alpha: 0.2)                      : Theme.of(context)                      .colorScheme                      .error                      .withValues(alpha: 0.2),                  borderRadius: BorderRadius.circular(8),                ),                child: Row(                  mainAxisSize: MainAxisSize.min,                  children: [                    CustomIconWidget(                      iconName:                      completionPercentage >= 80 ? 'verified' : 'warning',                      size: 4.w,                      color: completionPercentage >= 80                          ? Theme.of(context).colorScheme.tertiary                          : Theme.of(context).colorScheme.error,                    ),                    SizedBox(width: 2.w),                    Text(                      completionPercentage >= 80                          ? 'Ready to Publish'                          : 'Needs Work',                      style: Theme.of(context).textTheme.labelMedium?.copyWith(                        color: completionPercentage >= 80                            ? Theme.of(context).colorScheme.tertiary                            : Theme.of(context).colorScheme.error,                        fontWeight: FontWeight.w600,                      ),                    ),                  ],                ),              ),            ],          ),          if (completionPercentage >= 90) ...[            SizedBox(height: 2.h),            Container(              width: double.infinity,              padding: EdgeInsets.all(3.w),              decoration: BoxDecoration(                color: Theme.of(context)                    .colorScheme                    .tertiary                    .withValues(alpha: 0.1),                borderRadius: BorderRadius.circular(8),                border: Border.all(                  color: Theme.of(context)                      .colorScheme                      .tertiary                      .withValues(alpha: 0.3),                ),              ),              child: Row(                children: [                  CustomIconWidget(                    iconName: 'celebration',                    size: 5.w,                    color: Theme.of(context).colorScheme.tertiary,                  ),                  SizedBox(width: 3.w),                  Expanded(                    child: Text(                      'Congratulations! Your profile is ready to attract clients and start earning.',                      style: Theme.of(context).textTheme.labelSmall?.copyWith(                        color: Theme.of(context).colorScheme.tertiary,                        fontWeight: FontWeight.w500,                      ),                    ),                  ),                ],              ),            ),          ],        ],      ),    );  }}
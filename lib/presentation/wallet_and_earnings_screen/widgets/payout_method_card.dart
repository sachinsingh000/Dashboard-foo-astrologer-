import 'package:flutter/material.dart';import 'package:sizer/sizer.dart';import '../../../core/app_export.dart';class PayoutMethodCard extends StatelessWidget {  final Map<String, dynamic> payoutMethod;  final VoidCallback onEdit;  final VoidCallback onDelete;  const PayoutMethodCard({    super.key,    required this.payoutMethod,    required this.onEdit,    required this.onDelete,  });  @override  Widget build(BuildContext context) {    final theme = Theme.of(context);    final type = payoutMethod['type'] as String;    final isDefault = (payoutMethod['isDefault'] as bool?) ?? false;    final accountNumber = payoutMethod['accountNumber'] as String? ?? '';    final bankName = payoutMethod['bankName'] as String? ?? '';    final holderName = payoutMethod['holderName'] as String? ?? '';    return Container(      margin: EdgeInsets.symmetric(horizontal: 4.w, vertical: 1.h),      padding: EdgeInsets.all(4.w),      decoration: BoxDecoration(        color: theme.colorScheme.surface,        borderRadius: BorderRadius.circular(12),        border: Border.all(          color: isDefault              ? theme.colorScheme.primary.withValues(alpha: 0.3)              : theme.colorScheme.outline.withValues(alpha: 0.1),          width: isDefault ? 2 : 1,        ),        boxShadow: [          BoxShadow(            color: theme.shadowColor.withValues(alpha: 0.05),            blurRadius: 8,            offset: const Offset(0, 2),          ),        ],      ),      child: Column(        crossAxisAlignment: CrossAxisAlignment.start,        children: [          Row(            children: [              Container(                width: 12.w,                height: 12.w,                decoration: BoxDecoration(                  color: _getTypeColor(type, theme).withValues(alpha: 0.1),                  borderRadius: BorderRadius.circular(12),                ),                child: Center(                  child: CustomIconWidget(                    iconName: _getTypeIcon(type),                    color: _getTypeColor(type, theme),                    size: 20,                  ),                ),              ),              SizedBox(width: 3.w),              Expanded(                child: Column(                  crossAxisAlignment: CrossAxisAlignment.start,                  children: [                    Row(                      children: [                        Expanded(                          child: Text(                            _getTypeTitle(type),                            style: theme.textTheme.titleSmall?.copyWith(                              fontWeight: FontWeight.w600,                            ),                            maxLines: 1,                            overflow: TextOverflow.ellipsis,                          ),                        ),                        if (isDefault)                          Container(                            padding: EdgeInsets.symmetric(                                horizontal: 2.w, vertical: 0.5.h),                            decoration: BoxDecoration(                              color: theme.colorScheme.primary                                  .withValues(alpha: 0.1),                              borderRadius: BorderRadius.circular(8),                            ),                            child: Text(                              'DEFAULT',                              style: theme.textTheme.labelSmall?.copyWith(                                color: theme.colorScheme.primary,                                fontWeight: FontWeight.w600,                                fontSize: 9.sp,                              ),                            ),                          ),                      ],                    ),                    SizedBox(height: 0.5.h),                    Text(                      _getSubtitle(type, bankName, accountNumber),                      style: theme.textTheme.bodySmall?.copyWith(                        color: theme.colorScheme.onSurfaceVariant,                      ),                      maxLines: 1,                      overflow: TextOverflow.ellipsis,                    ),                  ],                ),              ),              PopupMenuButton<String>(                onSelected: (value) {                  if (value == 'edit') {                    onEdit();                  } else if (value == 'delete') {                    onDelete();                  }                },                itemBuilder: (context) => [                  PopupMenuItem(                    value: 'edit',                    child: Row(                      children: [                        CustomIconWidget(                          iconName: 'edit',                          color: theme.colorScheme.onSurface,                          size: 16,                        ),                        SizedBox(width: 2.w),                        const Text('Edit'),                      ],                    ),                  ),                  PopupMenuItem(                    value: 'delete',                    child: Row(                      children: [                        CustomIconWidget(                          iconName: 'delete',                          color: theme.colorScheme.error,                          size: 16,                        ),                        SizedBox(width: 2.w),                        Text(                          'Delete',                          style: TextStyle(color: theme.colorScheme.error),                        ),                      ],                    ),                  ),                ],                child: CustomIconWidget(                  iconName: 'more_vert',                  color: theme.colorScheme.onSurfaceVariant,                  size: 20,                ),              ),            ],          ),          SizedBox(height: 2.h),          Container(            padding: EdgeInsets.all(3.w),            decoration: BoxDecoration(              color: AppTheme.getAccentColor(context),              borderRadius: BorderRadius.circular(8),            ),            child: Column(              crossAxisAlignment: CrossAxisAlignment.start,              children: [                Text(                  'Account Holder',                  style: theme.textTheme.labelSmall?.copyWith(                    color: theme.colorScheme.onSurfaceVariant,                  ),                ),                SizedBox(height: 0.5.h),                Text(                  holderName,                  style: theme.textTheme.bodyMedium?.copyWith(                    fontWeight: FontWeight.w500,                  ),                  maxLines: 1,                  overflow: TextOverflow.ellipsis,                ),                if (type == 'bank') ...[                  SizedBox(height: 1.h),                  Text(                    'Account Number',                    style: theme.textTheme.labelSmall?.copyWith(                      color: theme.colorScheme.onSurfaceVariant,                    ),                  ),                  SizedBox(height: 0.5.h),                  Text(                    _maskAccountNumber(accountNumber),                    style: theme.textTheme.bodyMedium?.copyWith(                      fontWeight: FontWeight.w500,                      fontFamily: 'monospace',                    ),                  ),                ],              ],            ),          ),        ],      ),    );  }  Color _getTypeColor(String type, ThemeData theme) {    switch (type.toLowerCase()) {      case 'bank':        return theme.colorScheme.primary;      case 'paypal':        return const Color(0xFF0070BA);      case 'stripe':        return const Color(0xFF635BFF);      case 'upi':        return AppTheme.getSuccessColor(theme.brightness == Brightness.light            ? BuildContext as BuildContext            : BuildContext as BuildContext);      default:        return theme.colorScheme.onSurfaceVariant;    }  }  String _getTypeIcon(String type) {    switch (type.toLowerCase()) {      case 'bank':        return 'account_balance';      case 'paypal':        return 'payment';      case 'stripe':        return 'credit_card';      case 'upi':        return 'qr_code';      default:        return 'account_balance_wallet';    }  }  String _getTypeTitle(String type) {    switch (type.toLowerCase()) {      case 'bank':        return 'Bank Account';      case 'paypal':        return 'PayPal';      case 'stripe':        return 'Stripe';      case 'upi':        return 'UPI';      default:        return 'Payment Method';    }  }  String _getSubtitle(String type, String bankName, String accountNumber) {    switch (type.toLowerCase()) {      case 'bank':        return '$bankName â€¢ ${_maskAccountNumber(accountNumber)}';      case 'paypal':        return 'PayPal Account';      case 'stripe':        return 'Stripe Connect';      case 'upi':        return 'UPI ID';      default:        return 'Payment Method';    }  }  String _maskAccountNumber(String accountNumber) {    if (accountNumber.length <= 4) return accountNumber;    final visiblePart = accountNumber.substring(accountNumber.length - 4);    return '****$visiblePart';  }}